<div class="container-fluid px-3 py-3">
    <h2 class="text-center">Blob Play Ground</h2>
    <div class="row mb-3">
        <div class="col-md-4"></div>
        <div class="col-md-4">
            <h6 class="text-center text-secondary">Upload Blob</h6>
            <!-- <form class="form-example" (ngSubmit)="onSubmit()">
                <div class="row g-3 align-items-center justify-content-center">
                    <div class="col-auto">
                        <label for="name" class="col-form-label">Name</label>
                    </div>
                    <div class="col-auto">
                        <input id="name" class="form-control" type="text" name="name" [(ngModel)]="name">
                    </div>
                    <div class="col-auto">
                        <button class="btn btn-secondary" type="submit">Add Blob</button>
                    </div>
                </div>
            </form> -->
            <input type="file" class="form-control" (change)="onFileSelected($event)">
        </div>
        <div class="col-md-4"></div>
    </div>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-6">
            <div class="card shadow">
                <h6 class="text-center text-secondary mt-1">Blob list</h6>
                <div class="card-body">
                    @if (loading) {
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                    }
                    @if(!loading) {
                    @if (blobs.length > 0) {
                    <div class="table-responsive">

                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th scope="col">Key</th>
                                    <th scope="col">MetaData</th>
                                    <th scope="col">Blob Data</th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (blob of blobs; track $index) {
                                <tr>
                                    <th scope="row"> {{ blob.key }}</th>
                                    <td>{{ blob?.data?.metadata || '' | json}}</td>
                                    <!-- @if(isImageData(blob)){
                                    <img [src]="blob.data.img" class="img-thumbnail" alt="Image">
                                    }
                                    @if(!isImageData(blob)){ -->
                                    <td>{{ blob?.data.data }}</td>
                                    <!-- } -->
                                </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    }
                    @if (blobs.length === 0) {
                    <p>No blobs uploaded yet.</p>
                    }
                    }
                </div>
            </div>

            <button class="btn btn-danger mt-3" routerLink="/">Image Playground</button>
        </div>
        <div class="col-md-3"></div>
    </div>
</div>